<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Kalman Filter for Regular Time Series — filter_kalman • animovement</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Kalman Filter for Regular Time Series — filter_kalman"><meta name="description" content="Implements a Kalman filter for regularly sampled time series data with automatic
parameter selection based on sampling rate. The filter handles missing values (NA)
and provides noise reduction while preserving real signal changes."><meta property="og:description" content="Implements a Kalman filter for regularly sampled time series data with automatic
parameter selection based on sampling rate. The filter handles missing values (NA)
and provides noise reduction while preserving real signal changes."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">animovement</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/animovement.html">Get started</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-tutorial" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Tutorial</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-tutorial"><li><a class="dropdown-item" href="../articles/read-trackball.html">Read trackball data</a></li>
    <li><a class="dropdown-item" href="../articles/clean-tracks.html">Clean tracks</a></li>
    <li><a class="dropdown-item" href="../articles/calculate-kinematics.html">Calculate kinematics</a></li>
    <li><a class="dropdown-item" href="../articles/calculate-summary-statistics.html">Calculate summary statistics</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/mission.html">Mission &amp; Scope</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>Roadmaps</h6></li>
    <li><h6 class="dropdown-header" data-toc-skip>How to contribute</h6></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/roaldarbol/animovement/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Kalman Filter for Regular Time Series</h1>
      <small class="dont-index">Source: <a href="https://github.com/roaldarbol/animovement/blob/main/R/filter_kalman.R" class="external-link"><code>R/filter_kalman.R</code></a></small>
      <div class="d-none name"><code>filter_kalman.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Implements a Kalman filter for regularly sampled time series data with automatic
parameter selection based on sampling rate. The filter handles missing values (NA)
and provides noise reduction while preserving real signal changes.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">filter_kalman</span><span class="op">(</span></span>
<span>  <span class="va">measurements</span>,</span>
<span>  <span class="va">sampling_rate</span>,</span>
<span>  base_Q <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  R <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  initial_state <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  initial_P <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-measurements">measurements<a class="anchor" aria-label="anchor" href="#arg-measurements"></a></dt>
<dd><p>Numeric vector containing the measurements to be filtered.</p></dd>


<dt id="arg-sampling-rate">sampling_rate<a class="anchor" aria-label="anchor" href="#arg-sampling-rate"></a></dt>
<dd><p>Numeric value specifying the sampling rate in Hz (frames per second).</p></dd>


<dt id="arg-base-q">base_Q<a class="anchor" aria-label="anchor" href="#arg-base-q"></a></dt>
<dd><p>Optional. Process variance. If NULL, automatically calculated based on sampling_rate.
Represents expected rate of change in the true state.</p></dd>


<dt id="arg-r">R<a class="anchor" aria-label="anchor" href="#arg-r"></a></dt>
<dd><p>Optional. Measurement variance. If NULL, defaults to 0.1.
Represents the noise level in your measurements.</p></dd>


<dt id="arg-initial-state">initial_state<a class="anchor" aria-label="anchor" href="#arg-initial-state"></a></dt>
<dd><p>Optional. Initial state estimate. If NULL, uses first non-NA measurement.</p></dd>


<dt id="arg-initial-p">initial_P<a class="anchor" aria-label="anchor" href="#arg-initial-p"></a></dt>
<dd><p>Optional. Initial state uncertainty. If NULL, calculated based on sampling_rate.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A numeric vector of the same length as measurements containing the filtered values.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function implements a simple Kalman filter with a constant position model.
When parameters are not explicitly provided, they are automatically configured based
on the sampling rate:</p><ul><li><p>base_Q scales inversely with sampling rate (base_Q ≈ 0.15/sampling_rate)</p></li>
<li><p>R defaults to 0.1 (assuming moderate measurement noise)</p></li>
<li><p>initial_P scales with sampling rate uncertainty</p></li>
</ul><p>Missing values (NA) are handled by relying on the prediction step without measurement updates.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>Parameter selection guidelines:</p><ul><li><p>Increase R or decrease base_Q for smoother output</p></li>
<li><p>Decrease R or increase base_Q for more responsive output</p></li>
<li><p>For high-frequency data (&gt;100 Hz), consider reducing base_Q</p></li>
<li><p>If you know your sensor's noise characteristics, set R to the square of the standard deviation</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>filter_kalman_irregular for handling irregularly sampled data</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Basic usage with 60 Hz data</span></span></span>
<span class="r-in"><span><span class="va">measurements</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1.1</span>, <span class="cn">NA</span>, <span class="fl">0.9</span>, <span class="fl">1.2</span>, <span class="cn">NA</span>, <span class="fl">0.8</span>, <span class="fl">1.1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">filtered</span> <span class="op">&lt;-</span> <span class="fu">filter_kalman</span><span class="op">(</span><span class="va">measurements</span>, sampling_rate <span class="op">=</span> <span class="fl">60</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Custom parameters for more aggressive filtering</span></span></span>
<span class="r-in"><span><span class="va">filtered_custom</span> <span class="op">&lt;-</span> <span class="fu">filter_kalman</span><span class="op">(</span><span class="va">measurements</span>,</span></span>
<span class="r-in"><span>                                sampling_rate <span class="op">=</span> <span class="fl">60</span>,</span></span>
<span class="r-in"><span>                                base_Q <span class="op">=</span> <span class="fl">0.001</span>,</span></span>
<span class="r-in"><span>                                R <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://roald-arboel.com" class="external-link">Mikkel Roald-Arbøl</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

