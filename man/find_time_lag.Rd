% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/align_timeseries.R
\name{find_time_lag}
\alias{find_time_lag}
\title{Find optimal time lag between two time series using cross-correlation}
\usage{
find_time_lag(signal, reference, max_lag = 5000, normalize = TRUE)
}
\arguments{
\item{signal}{Time series to align (numeric vector)}

\item{reference}{Reference time series to align against (numeric vector)}

\item{max_lag}{Maximum lag to consider in both directions, in number of samples.
If NULL, uses (length of series - 1)}

\item{normalize}{Logical; if TRUE, z-score normalizes both series before
computing cross-correlation (recommended for series with different scales)}
}
\value{
Integer indicating the optimal lag. A positive value means the signal
needs to be shifted forward in time to align with the reference. A negative
value means the signal needs to be shifted backward.
}
\description{
This function calculates the optimal lag between two time series by finding the
lag that maximizes their cross-correlation. It's particularly useful for
synchronizing recordings from different sources, such as physiological and
behavioral data.
}
\examples{
# Create two artificially shifted sine waves
t <- seq(0, 10, 0.1)
reference <- sin(t)
signal <- sin(t - 0.5)  # Signal delayed by 0.5 units
lag <- find_time_lag(signal, reference)
print(lag)  # Should be approximately 5 samples (0.5 units)

}
\seealso{
\code{\link{align_time_series}} for applying the computed lag
}
